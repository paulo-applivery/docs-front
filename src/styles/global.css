@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Custom Properties - loaded from CMS or defaults */
:root {
  /* Primary colors - will be overridden by CMS */
  --color-primary: #10b981;
  --color-primary-light: #34d399;
  --color-primary-dark: #059669;
  --color-primary-10: rgba(16, 185, 129, 0.1);
  --color-primary-20: rgba(16, 185, 129, 0.2);
  --color-primary-50: rgba(16, 185, 129, 0.5);
  --color-primary-5: rgba(16, 185, 129, 0.05);

  /* Accent colors - will be overridden by CMS */
  --color-accent: #6366f1;
  --color-accent-light: #818cf8;
  --color-accent-dark: #4f46e5;
  --color-accent-10: rgba(99, 102, 241, 0.1);

  /* Brand background */
  --color-background-brand: #000717;

  /* Typography - will be overridden by CMS */
  --font-heading: 'Inter', ui-sans-serif, system-ui, -apple-system, sans-serif;
  --font-body: 'Inter', ui-sans-serif, system-ui, -apple-system, sans-serif;
  --font-code: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

  /* Logo dimensions - will be overridden by CMS */
  --logo-width: 120px;
  --logo-height: 32px;

  /* Light mode colors - will be overridden by CMS */
  --color-background: #e6ecfc63;
  --color-background-secondary: #f9fafb;
  --color-background-tertiary: #f3f4f6;
  --color-background-80: rgba(230, 236, 252, 0.8);
  --color-surface: #ffffff;
  --color-bg-primary: #ffffff;
  --color-border: #e5e7eb;
  --color-border-light: #f3f4f6;

  /* Text colors - will be overridden by CMS */
  --color-text-primary: #111827;
  --color-text-secondary: #4b5563;
  --color-text-tertiary: #6b7280;
  --color-text-muted: #9ca3af;

  /* Menu item hover - will be overridden by CMS */
  --color-menu-item-hover-bg: #0241e30d;
  --color-menu-item-hover-text: #111827;

  /* Code blocks - will be overridden by CMS */
  --color-code-block-bg: #1e293b;
  --color-code-block-text: #e2e8f0;

  /* Inline code */
  --color-inline-code-bg: #f1f5f9;
  --color-inline-code-text: #0f172a;

  /* Sidebar */
  --sidebar-width: 260px;
  --sidebar-collapsed-width: 64px;

  /* Header */
  --header-height: 64px;

  /* TOC */
  --toc-width: 220px;

  /* Content */
  --content-max-width: 768px;

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-normal: 200ms ease;
  --transition-slow: 300ms ease;
}

/* Dark mode - will be overridden by CMS */
.dark {
  --color-background: #0f172a;
  --color-background-secondary: #1e293b;
  --color-background-tertiary: #334155;
  --color-background-80: rgba(15, 23, 42, 0.8);
  --color-surface: #1e293b;
  --color-bg-primary: #0b1220;
  --color-border: #334155;
  --color-border-light: #1e293b;

  --color-text-primary: #f8fafc;
  --color-text-secondary: #cbd5e1;
  --color-text-tertiary: #94a3b8;
  --color-text-muted: #64748b;

  /* Menu item hover - will be overridden by CMS */
  --color-menu-item-hover-bg: #0241e3;
  --color-menu-item-hover-text: #f8fafc;

  /* Code blocks */
  --color-code-block-bg: #0f172a;
  --color-code-block-text: #e2e8f0;

  /* Inline code */
  --color-inline-code-bg: #1e293b;
  --color-inline-code-text: #e2e8f0;
}

/* Base styles */
@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background-color: var(--color-background);
    color: var(--color-text-primary);
    font-family: var(--font-body);
    transition: background-color var(--transition-normal), color var(--transition-normal);
  }

  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
    font-family: var(--font-heading);
  }

  code, pre, kbd, samp {
    font-family: var(--font-code);
  }

  h1 {
    @apply text-2xl md:text-3xl;
  }

  h2 {
    @apply text-xl md:text-2xl;
  }

  h3 {
    @apply text-lg md:text-xl;
  }

  h4 {
    @apply text-base md:text-lg;
  }

  .article-content a {
    color: var(--color-primary);
    transition: color var(--transition-fast);
  }

  .article-content a:hover {
    color: var(--color-primary-dark);
  }

  .dark .article-content a {
    color: var(--color-accent-light);
  }

  .dark .article-content a:hover {
    color: var(--color-accent);
  }

  /* Ensure sidebar links are never affected by article link styles */
  .sidebar a,
  .sidebar a:hover,
  .dark .sidebar a,
  .dark .sidebar a:hover {
    color: inherit;
  }

  /* Selection */
  ::selection {
    background-color: var(--color-primary);
    color: white;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background-color: var(--color-border);
    border-radius: 9999px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-text-muted);
  }
}

/* Component styles */
@layer components {
  /* Layout */
  .docs-layout {
    @apply flex min-h-screen;
  }

  /* Sidebar */
  .sidebar {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    width: var(--sidebar-width);
    background-color: var(--color-background);
    z-index: 40;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: transform 0.3s ease;
  }

  .sidebar-header {
    height: var(--header-height);
    display: flex;
    align-items: center;
    padding: 0 1rem;
  }

  .sidebar-logo {
    display: flex;
    align-items: center;
  }

  .sidebar-logo .logo-light {
    display: block;
  }

  .sidebar-logo .logo-dark {
    display: none;
  }

  .dark .sidebar-logo .logo-light.dark\\:hidden {
    display: none;
  }

  .dark .sidebar-logo .logo-dark {
    display: block;
  }

  .sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: 1rem 0.75rem;
  }

  .sidebar-nav-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    color: var(--color-text-secondary);
    transition: all 0.15s ease;
  }

  .sidebar-nav-item:hover {
    color: var(--color-menu-item-hover-text);
    background-color: var(--color-menu-item-hover-bg);
  }

  .sidebar-nav-item.active {
    background-color: var(--color-menu-item-active-bg, var(--color-primary-10));
    color: var(--color-menu-item-active-text, var(--color-primary));
    font-weight: 500;
  }

  .dark .sidebar-nav-item.active {
    background-color: var(--color-menu-item-active-bg, var(--color-accent-10));
    color: var(--color-menu-item-active-text, var(--color-accent-light));
  }

  .sidebar-nav-group {
    margin-bottom: 1rem;
  }

  .sidebar-nav-group-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-tertiary);
    background: transparent;
    border: none;
    cursor: pointer;
    border-radius: 0.375rem;
    transition: all 0.15s ease;
  }

  .sidebar-nav-group-title:hover {
    color: var(--color-menu-item-hover-text);
    background-color: var(--color-menu-item-hover-bg);
  }

  .nav-group-content {
    overflow: hidden;
  }

  .nav-chevron {
    opacity: 0.5;
    transition: transform 0.2s ease, opacity 0.15s ease;
  }

  .sidebar-nav-group-title:hover .nav-chevron {
    opacity: 1;
  }

  /* Nested subgroup styles */
  .sidebar-nav-subgroup {
    margin-left: 0.5rem;
    padding-left: 0.75rem;
  }

  .sidebar-nav-subgroup-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    padding: 0.375rem 0.5rem;
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--color-text-secondary);
    background: transparent;
    border: none;
    cursor: pointer;
    border-radius: 0.25rem;
    transition: all 0.15s ease;
  }

  .sidebar-nav-subgroup-title:hover {
    color: var(--color-menu-item-hover-text);
    background-color: var(--color-menu-item-hover-bg);
  }

  .nav-subgroup-content {
    overflow: hidden;
  }

  .sidebar-nav-item-nested {
    padding-left: 1.25rem;
    font-size: 0.8125rem;
  }

  /* Header */
  .header {
    position: fixed;
    top: 0;
    right: 0;
    height: var(--header-height);
    background-color: transparent;
    z-index: 30;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 1.5rem;
    left: var(--sidebar-width);
  }

  .header-nav {
    @apply flex items-center gap-2;
    margin-right: 16px;
  }

  .header-nav-item {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-secondary);
    transition: color 0.15s ease;
  }

  .header-nav-item:hover {
    color: var(--color-menu-item-hover-text);
  }

  .header-nav-item.active {
    color: var(--color-text-primary);
  }

  /* Main content */
  .main-content {
    flex: 1;
    margin-left: var(--sidebar-width);
    padding-top: var(--header-height);
    min-width: 0; /* Prevent flex overflow */
  }

  .content-wrapper {
    max-width: var(--content-max-width);
    margin: 0 auto;
    padding: 2rem 1.5rem;
  }

  /* TOC is now inside content container, no extra padding needed */

  /* Article */
  .article-header {
    margin-bottom: 2rem;
  }

  .article-breadcrumb {
    font-size: 0.875rem;
    color: var(--color-primary);
    font-weight: 500;
    margin-bottom: 0.5rem;
  }

  .dark .article-breadcrumb {
    color: var(--color-accent-light);
  }

  .article-title {
    font-size: 2.25rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin-bottom: 1rem;
  }

  @media (min-width: 768px) {
    .article-title {
      font-size: 2.5rem;
    }
  }

  .article-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    line-height: 1.75;
  }

  .article-content {
    @apply prose prose-slate dark:prose-invert max-w-none;
  }

  .article-content h2 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-top: 3rem;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--color-border);
  }

  .article-content h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-top: 2rem;
    margin-bottom: 0.75rem;
  }

  .article-content p {
    color: var(--color-text-secondary);
    line-height: 1.75;
    margin-bottom: 1rem;
  }

  .article-content a {
    color: var(--color-primary);
  }

  .article-content a:hover {
    text-decoration: underline;
  }

  .dark .article-content a {
    color: var(--color-accent-light);
  }

  .article-content ul, .article-content ol {
    margin: 1rem 0;
    padding-left: 1.5rem;
  }

  .article-content ul {
    list-style-type: disc;
  }

  .article-content ol {
    list-style-type: decimal;
  }

  .article-content li {
    color: var(--color-text-secondary);
    margin-bottom: 0.5rem;
  }

  .article-content :where(hr):not(:where([class~="not-prose"],[class~="not-prose"] *)) {
    border: none;
    border-bottom: 1px solid var(--color-border);
  }

  .article-content code {
    padding: 0.2rem 0.4rem;
    border-radius: 0.375rem;
    background-color: var(--color-inline-code-bg);
    color: var(--color-inline-code-text);
    font-size: 0.8125em;
    font-family: 'JetBrains Mono', ui-monospace, monospace;
    border: 1px solid var(--color-border);
    font-weight: 500;
    word-break: break-word;
  }

  .article-content pre {
    position: relative;
    padding: 1rem;
    border-radius: 0.5rem;
    background-color: var(--color-code-block-bg);
    color: var(--color-code-block-text);
    overflow-x: auto;
    margin: 1.5rem 0;
  }

  .article-content pre code {
    background-color: transparent;
    color: inherit;
    padding: 0;
  }

  .article-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: 1rem;
    margin: 1.5rem 0;
    font-style: italic;
    color: var(--color-text-tertiary);
  }

  .article-content img {
    border-radius: 16px;
  }

  /* Table of Contents */
  .toc {
    position: fixed;
    right: 1.5rem;
    top: calc(var(--header-height) + 2rem);
    width: var(--toc-width);
    display: none;
  }

  @media (min-width: 1280px) {
    .toc {
      display: block;
    }
  }

  .toc-title {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-tertiary);
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .toc-list {
    border-left: 1px solid var(--color-border);
    padding-left: 1rem;
  }

  .toc-item {
    display: block;
    font-size: 0.875rem;
    color: var(--color-text-tertiary);
    padding: 0.25rem 0;
    transition: color 0.15s ease;
  }

  .toc-item:hover {
    color: var(--color-text-primary);
  }

  .toc-item.active {
    color: var(--color-primary);
    font-weight: 500;
    position: relative;
  }

  .toc-item.active::before {
    content: '';
    position: absolute;
    left: -1rem;
    top: 50%;
    transform: translateY(-50%);
    width: 2px;
    height: 1em;
    background-color: var(--color-primary);
    border-radius: 1px;
  }

  .dark .toc-item.active {
    color: var(--color-accent-light);
  }

  .dark .toc-item.active::before {
    background-color: var(--color-accent-light);
  }

  /* Search */
  .search-input {
    width: 100%;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    border: 1px solid var(--color-border);
    background-color: var(--color-background-secondary);
    color: var(--color-text-primary);
    transition: all 0.15s ease;
  }

  .search-input::placeholder {
    color: var(--color-text-muted);
  }

  .search-input:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--color-primary-50);
    border-color: var(--color-primary);
  }

  /* Buttons */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    font-weight: 500;
    font-size: 0.875rem;
    transition: all 0.15s ease;
  }

  .btn-primary {
    background-color: var(--color-button-bg, var(--color-primary));
    color: var(--color-button-text, white);
  }

  .btn-primary:hover {
    background-color: var(--color-button-bg-hover, var(--color-primary-dark));
    color: var(--color-button-text, white);
  }

  .btn-secondary {
    background-color: var(--color-background-secondary);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
  }

  .btn-secondary:hover {
    background-color: var(--color-background-tertiary);
    color: var(--color-text-primary);
  }

  /* Cards */
  .card {
    padding: 1rem;
    border-radius: 0.75rem;
    border: 1px solid var(--color-border);
    background-color: var(--color-surface);
    transition: all 0.2s ease;
  }

  .card:hover {
    border-color: var(--color-primary-50);
    box-shadow: 0 10px 15px -3px var(--color-primary-5), 0 4px 6px -4px var(--color-primary-5);
  }

  /* Badge */
  .badge {
    display: inline-flex;
    align-items: center;
    padding: 0.125rem 0.625rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .badge-primary {
    background-color: var(--color-primary-10);
    color: var(--color-primary);
  }

  .dark .badge-primary {
    background-color: var(--color-accent-10);
    color: var(--color-accent-light);
  }

  /* Copy button */
  .copy-button {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    padding: 0.5rem;
    border-radius: 0.375rem;
    background-color: var(--color-background-tertiary);
    color: var(--color-text-tertiary);
    opacity: 0;
    transition: all 0.15s ease;
  }

  .copy-button:hover {
    color: var(--color-text-primary);
  }

  .group:hover .copy-button {
    opacity: 1;
  }

  /* Footer */
  .footer {
    margin-top: 4rem;
    padding-top: 2rem;
    border-top: 1px solid var(--color-border);
  }

  .footer-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 0.875rem;
  }

  .footer-nav-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-text-secondary);
    transition: color 0.15s ease;
  }

  .footer-nav-link:hover {
    color: var(--color-primary);
  }

  .dark .footer-nav-link:hover {
    color: var(--color-accent-light);
  }

  /* Mobile */
  @media (max-width: 1024px) {
    .sidebar {
      transform: translateX(-100%);
    }

    .sidebar.open {
      transform: translateX(0);
    }

    .header {
      left: 0;
    }

    .main-content {
      margin-left: 0;
    }
  }

  /* TLDR Box */
  .tldr-box {
    padding: 1rem;
    border-radius: 0.5rem;
    background-color: var(--color-primary-5);
    border: 1px solid var(--color-primary-20);
    margin-bottom: 2rem;
  }

  .tldr-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-primary);
    margin-bottom: 0.5rem;
  }

  .dark .tldr-title {
    color: var(--color-accent-light);
  }

  .tldr-content {
    color: var(--color-text-secondary);
  }

  /* Key Takeaways */
  .takeaways {
    padding: 1.5rem;
    border-radius: 0.75rem;
    background-color: var(--color-background-secondary);
    border: 1px solid var(--color-border);
    margin: 2rem 0;
  }

  .takeaways-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: 1rem;
  }

  .takeaways-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .takeaways-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    color: var(--color-text-secondary);
  }

  .takeaways-icon {
    width: 1.25rem;
    height: 1.25rem;
    color: var(--color-primary);
    flex-shrink: 0;
    margin-top: 0.125rem;
  }

  /* ===== DOCUMENTATION CUSTOM COMPONENTS ===== */

  /* Callouts */
  .callout {
    display: flex;
    gap: 0.75rem;
    padding: 1rem;
    border-radius: 0.5rem;
    margin: 1.5rem 0;
    border: 1px solid;
  }

  .callout-icon {
    flex-shrink: 0;
    margin-top: 0.125rem;
  }

  .callout-content {
    flex: 1;
    min-width: 0;
  }

  .callout-content p:first-child {
    margin-top: 0;
  }

  .callout-content p:last-child {
    margin-bottom: 0;
  }

  .callout-info {
    background: rgb(239 246 255);
    border-color: rgb(191 219 254);
    color: rgb(30 64 175);
  }

  .callout-warning {
    background: rgb(255 251 235);
    border-color: rgb(253 230 138);
    color: rgb(146 64 14);
  }

  .callout-danger {
    background: rgb(254 242 242);
    border-color: rgb(254 202 202);
    color: rgb(153 27 27);
  }

  .callout-success {
    background: rgb(240 253 244);
    border-color: rgb(187 247 208);
    color: rgb(22 101 52);
  }

  .callout-tip {
    background: rgb(250 245 255);
    border-color: rgb(221 214 254);
    color: rgb(88 28 135);
  }

  .callout-note {
    background: rgb(241 245 249);
    border-color: rgb(203 213 225);
    color: rgb(51 65 85);
  }

  /* Dark mode callouts */
  .dark .callout-info {
    background: rgb(30 58 138 / 0.3);
    border-color: rgb(59 130 246 / 0.5);
    color: rgb(191 219 254);
  }

  .dark .callout-warning {
    background: rgb(120 53 15 / 0.3);
    border-color: rgb(245 158 11 / 0.5);
    color: rgb(253 230 138);
  }

  .dark .callout-danger {
    background: rgb(127 29 29 / 0.3);
    border-color: rgb(239 68 68 / 0.5);
    color: rgb(254 202 202);
  }

  .dark .callout-success {
    background: rgb(20 83 45 / 0.3);
    border-color: rgb(34 197 94 / 0.5);
    color: rgb(187 247 208);
  }

  .dark .callout-tip {
    background: rgb(88 28 135 / 0.3);
    border-color: rgb(168 85 247 / 0.5);
    color: rgb(221 214 254);
  }

  .dark .callout-note {
    background: rgb(51 65 85 / 0.3);
    border-color: rgb(100 116 139 / 0.5);
    color: rgb(203 213 225);
  }

  /* Accordion */
  .doc-accordion {
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    margin: 1rem 0;
    overflow: hidden;
  }

  .doc-accordion-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 0.75rem 1rem;
    background: var(--color-background-secondary);
    font-weight: 500;
    color: var(--color-text-primary);
    cursor: pointer;
    border: none;
    text-align: left;
    transition: background-color 0.15s ease;
  }

  .doc-accordion-header:hover {
    background: var(--color-background-tertiary);
  }

  .doc-accordion-icon {
    transition: transform 0.2s ease;
  }

  .doc-accordion.open .doc-accordion-icon {
    transform: rotate(180deg);
  }

  .doc-accordion-content {
    padding: 1rem;
    border-top: 1px solid var(--color-border);
    display: none;
  }

  .doc-accordion.open .doc-accordion-content {
    display: block;
  }

  /* Tabs */
  .doc-tabs {
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    margin: 1.5rem 0;
    overflow: hidden;
  }

  .doc-tabs-header {
    display: flex;
    border-bottom: 1px solid var(--color-border);
    background: var(--color-background-secondary);
    overflow-x: auto;
  }

  .doc-tab-button {
    padding: 0.625rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all 0.2s;
    color: var(--color-text-tertiary);
    white-space: nowrap;
    background: transparent;
    border: none;
    cursor: pointer;
  }

  .doc-tab-button:hover {
    color: var(--color-text-primary);
  }

  .doc-tab-button.active {
    border-bottom-color: var(--color-primary);
    color: var(--color-primary);
    background: var(--color-background);
  }

  .dark .doc-tab-button.active {
    border-bottom-color: var(--color-accent-light);
    color: var(--color-accent-light);
  }

  .doc-tabs-content {
    padding: 1rem;
  }

  .doc-tab-panel {
    display: none;
  }

  .doc-tab-panel.active {
    display: block;
  }

  /* Steps */
  .doc-steps {
    margin: 1.5rem 0;
  }

  .doc-step {
    display: flex;
    gap: 1rem;
    position: relative;
    padding-bottom: 1.5rem;
  }

  .doc-step:not(:last-child)::before {
    content: '';
    position: absolute;
    left: 0.6875rem;
    top: 1.75rem;
    bottom: 0;
    width: 2px;
    background: var(--color-border);
  }

  .doc-step:last-child {
    padding-bottom: 0;
  }

  .doc-step-number {
    flex-shrink: 0;
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 50%;
    background: var(--color-primary);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .doc-step-content {
    flex: 1;
    padding-top: 0.125rem;
  }

  .doc-step-title {
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: 0.5rem;
  }

  .doc-step-body {
    color: var(--color-text-secondary);
    font-size: 0.9375rem;
  }

  .doc-step-body p:first-child {
    margin-top: 0;
  }

  .doc-step-body p:last-child {
    margin-bottom: 0;
  }

  /* Cards */
  .doc-card-group {
    display: grid;
    gap: 1rem;
    margin: 1.5rem 0;
  }

  .doc-card-group.cols-1 {
    grid-template-columns: 1fr;
  }

  .doc-card-group.cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }

  .doc-card-group.cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }

  .doc-card-group.cols-4 {
    grid-template-columns: repeat(4, 1fr);
  }

  @media (max-width: 768px) {
    .doc-card-group.cols-2,
    .doc-card-group.cols-3,
    .doc-card-group.cols-4 {
      grid-template-columns: 1fr;
    }
  }

  .doc-card {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 1rem;
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    text-decoration: none;
    color: inherit;
    transition: all 0.2s;
    background: var(--color-background);
  }

  a.doc-card:hover {
    border-color: var(--color-primary);
    box-shadow: 0 4px 12px var(--color-primary-10);
  }

  .doc-card-icon {
    flex-shrink: 0;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 0.5rem;
    background: var(--color-primary-10);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-primary);
  }

  .doc-card-body {
    flex: 1;
    min-width: 0;
  }

  .doc-card-title {
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: 0.25rem;
  }

  .doc-card-description {
    font-size: 0.875rem;
    color: var(--color-text-secondary);
  }

  .doc-card-description p {
    margin: 0;
  }

  .doc-card-arrow {
    flex-shrink: 0;
    color: var(--color-text-muted);
    margin-top: 0.25rem;
    transition: transform 0.2s;
  }

  a.doc-card:hover .doc-card-arrow {
    transform: translateX(4px);
    color: var(--color-primary);
  }

  .dark a.doc-card:hover {
    border-color: var(--color-accent-light);
    box-shadow: 0 4px 12px var(--color-accent-10);
  }

  .dark a.doc-card:hover .doc-card-arrow {
    color: var(--color-accent-light);
  }

  /* ChildGrid - inline grid of child documents */
  .child-grid {
    display: grid;
    gap: 1rem;
    margin: 1.5rem 0;
  }

  .child-grid.cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }

  .child-grid.cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }

  .child-grid.cols-4 {
    grid-template-columns: repeat(4, 1fr);
  }

  .child-grid-card {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
    padding: 1rem 1.25rem;
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    text-decoration: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    background: var(--color-background);
  }

  .child-grid-card:hover {
    border-color: var(--color-primary);
    box-shadow: 0 4px 12px var(--color-primary-10);
    text-decoration: none;
  }

  .child-grid-card-title {
    font-weight: 600;
    font-size: 0.9375rem;
    color: var(--color-text-primary);
  }

  .child-grid-card-desc {
    font-size: 0.8125rem;
    color: var(--color-text-secondary);
    margin: 0;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .dark .child-grid-card:hover {
    border-color: var(--color-accent-light);
    box-shadow: 0 4px 12px var(--color-accent-10);
  }

  @media (max-width: 1024px) {
    .child-grid.cols-3,
    .child-grid.cols-4 {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .child-grid.cols-2,
    .child-grid.cols-3,
    .child-grid.cols-4 {
      grid-template-columns: 1fr;
    }
  }

  /* API Endpoint */
  .doc-api-endpoint {
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    margin: 1.5rem 0;
    overflow: hidden;
  }

  .doc-api-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: var(--color-background-secondary);
    border-bottom: 1px solid var(--color-border);
  }

  .doc-api-method {
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    font-family: 'JetBrains Mono', ui-monospace, monospace;
  }

  .method-get {
    background: rgb(220 252 231);
    color: rgb(22 101 52);
  }

  .method-post {
    background: rgb(219 234 254);
    color: rgb(30 64 175);
  }

  .method-put {
    background: rgb(254 249 195);
    color: rgb(133 77 14);
  }

  .method-patch {
    background: rgb(255 237 213);
    color: rgb(154 52 18);
  }

  .method-delete {
    background: rgb(254 226 226);
    color: rgb(153 27 27);
  }

  .dark .method-get {
    background: rgb(22 101 52 / 0.3);
    color: rgb(134 239 172);
  }

  .dark .method-post {
    background: rgb(30 64 175 / 0.3);
    color: rgb(147 197 253);
  }

  .dark .method-put {
    background: rgb(133 77 14 / 0.3);
    color: rgb(253 224 71);
  }

  .dark .method-patch {
    background: rgb(154 52 18 / 0.3);
    color: rgb(253 186 116);
  }

  .dark .method-delete {
    background: rgb(153 27 27 / 0.3);
    color: rgb(252 165 165);
  }

  .doc-api-path {
    font-size: 0.875rem;
    font-family: 'JetBrains Mono', ui-monospace, monospace;
    color: var(--color-text-secondary);
  }

  .doc-api-content {
    padding: 1rem;
  }

  .doc-api-content p:first-child {
    margin-top: 0;
  }

  .doc-api-content p:last-child {
    margin-bottom: 0;
  }

  /* Parameter Table */
  .doc-parameter-table table {
    width: 100%;
    font-size: 0.875rem;
  }

  .doc-parameter-table th {
    background: var(--color-background-secondary);
    text-align: left;
  }

  .doc-parameter-table td,
  .doc-parameter-table th {
    padding: 0.5rem 0.75rem;
    border: 1px solid var(--color-border);
  }

  /* Code Block with Filename */
  .doc-code-block {
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    margin: 1.5rem 0;
    overflow: hidden;
  }

  .doc-code-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem 1rem;
    background: var(--color-background-tertiary);
    border-bottom: 1px solid var(--color-border);
  }

  .doc-code-filename {
    font-size: 0.75rem;
    font-family: 'JetBrains Mono', ui-monospace, monospace;
    color: var(--color-text-secondary);
  }

  .doc-code-copy {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    color: var(--color-text-tertiary);
    background: transparent;
    border: none;
    border-radius: 0.25rem;
    cursor: pointer;
    transition: all 0.15s;
  }

  .doc-code-copy:hover {
    color: var(--color-text-primary);
    background: var(--color-background-secondary);
  }

  .doc-code-copy.copied {
    color: var(--color-primary);
  }

  .doc-code-block pre {
    margin: 0;
    padding: 1rem;
    border-radius: 0;
    background: var(--color-code-block-bg);
    color: var(--color-code-block-text);
    overflow-x: auto;
  }

  .doc-code-block code {
    font-family: 'JetBrains Mono', ui-monospace, monospace;
    font-size: 0.875rem;
    line-height: 1.6;
  }

  /* Standalone code block wrapper (non-titled) */
  .code-block-wrapper {
    position: relative;
    margin: 1.5rem 0;
  }

  .code-block-wrapper pre {
    margin: 0;
    padding: 1rem;
    border-radius: 0.5rem;
    background-color: var(--color-code-block-bg);
    color: var(--color-code-block-text);
    overflow-x: auto;
  }

  .code-block-wrapper pre code {
    background-color: transparent;
    color: inherit;
    padding: 0;
  }

  .code-copy-btn {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    padding: 0;
    color: var(--color-code-block-text);
    opacity: 0;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: opacity 0.15s, background 0.15s;
  }

  .code-block-wrapper:hover .code-copy-btn {
    opacity: 0.7;
  }

  .code-copy-btn:hover {
    opacity: 1 !important;
    background: rgba(255, 255, 255, 0.15);
  }

  .code-copy-btn.copied {
    opacity: 1;
    color: #22c55e;
  }

  /* Browser Mockup - Chrome-like frame for screenshots */
  .browser-mockup {
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    border: 1px solid;
    width: 100%;
    margin: 1.5rem 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  }

  /* Light theme */
  .browser-mockup-light { border-color: #e2e8f0; background: #ffffff; }
  .browser-mockup-light .browser-titlebar { background: #f1f5f9; border-bottom: 1px solid #e2e8f0; }
  .browser-mockup-light .browser-tab { background: #ffffff; border-color: #e2e8f0; color: #334155; }
  .browser-mockup-light .browser-toolbar { background: #f8fafc; border-bottom: 1px solid #e2e8f0; }
  .browser-mockup-light .browser-address-bar { background: #f1f5f9; border-color: #e2e8f0; color: #475569; }
  .browser-mockup-light .nav-icon,
  .browser-mockup-light .lock-icon { color: #64748b; }
  .browser-mockup-light .browser-content { background: #ffffff; }

  /* Dark theme */
  .browser-mockup-dark { border-color: #2d3748; background: #1a202c; }
  .browser-mockup-dark .browser-titlebar { background: #1e2433; border-bottom: 1px solid #2d3748; }
  .browser-mockup-dark .browser-tab { background: #283040; border-color: #2d3748; color: #cbd5e1; }
  .browser-mockup-dark .browser-toolbar { background: #1a2030; border-bottom: 1px solid #2d3748; }
  .browser-mockup-dark .browser-address-bar { background: #283040; border-color: #374151; color: #94a3b8; }
  .browser-mockup-dark .nav-icon,
  .browser-mockup-dark .lock-icon { color: #64748b; }
  .browser-mockup-dark .browser-content { background: #1a202c; }

  /* Auto theme (follows site dark mode) */
  .browser-mockup-auto { border-color: #e2e8f0; background: #ffffff; }
  .browser-mockup-auto .browser-titlebar { background: #f1f5f9; border-bottom: 1px solid #e2e8f0; }
  .browser-mockup-auto .browser-tab { background: #ffffff; border-color: #e2e8f0; color: #334155; }
  .browser-mockup-auto .browser-toolbar { background: #f8fafc; border-bottom: 1px solid #e2e8f0; }
  .browser-mockup-auto .browser-address-bar { background: #f1f5f9; border-color: #e2e8f0; color: #475569; }
  .browser-mockup-auto .nav-icon,
  .browser-mockup-auto .lock-icon { color: #64748b; }
  .browser-mockup-auto .browser-content { background: #ffffff; }

  .dark .browser-mockup-auto { border-color: #2d3748; background: #1a202c; }
  .dark .browser-mockup-auto .browser-titlebar { background: #1e2433; border-bottom-color: #2d3748; }
  .dark .browser-mockup-auto .browser-tab { background: #283040; border-color: #2d3748; color: #cbd5e1; }
  .dark .browser-mockup-auto .browser-toolbar { background: #1a2030; border-bottom-color: #2d3748; }
  .dark .browser-mockup-auto .browser-address-bar { background: #283040; border-color: #374151; color: #94a3b8; }
  .dark .browser-mockup-auto .nav-icon,
  .dark .browser-mockup-auto .lock-icon { color: #64748b; }
  .dark .browser-mockup-auto .browser-content { background: #1a202c; }

  /* Browser mockup structure */
  .browser-titlebar {
    display: flex;
    align-items: center;
    padding: 0.5rem 0.75rem;
    gap: 0.75rem;
    min-height: 2.25rem;
  }
  .browser-traffic-lights { display: flex; gap: 0.5rem; flex-shrink: 0; }
  .browser-mockup .dot { width: 0.75rem; height: 0.75rem; border-radius: 50%; }
  .browser-mockup .dot-close { background: #ff5f57; }
  .browser-mockup .dot-minimize { background: #ffbd2e; }
  .browser-mockup .dot-maximize { background: #28c840; }
  .browser-tab {
    display: flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: 0.375rem 0.375rem 0 0;
    border: 1px solid;
    border-bottom: none;
    font-size: 0.75rem;
    font-weight: 500;
    max-width: 12rem;
    margin-bottom: -0.5rem;
    padding-bottom: 0.5rem;
  }
  .browser-tab-title { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .browser-tab-spacer { flex: 1; }
  .browser-toolbar { display: flex; align-items: center; padding: 0.375rem 0.75rem; gap: 0.5rem; }
  .browser-nav-buttons { display: flex; align-items: center; gap: 0.125rem; flex-shrink: 0; }
  .browser-mockup .nav-icon { width: 1rem; height: 1rem; flex-shrink: 0; }
  .browser-mockup .nav-icon.disabled { opacity: 0.3; }
  .browser-address-bar {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.3rem 0.625rem;
    border-radius: 9999px;
    border: 1px solid;
    font-size: 0.75rem;
    min-width: 0;
  }
  .browser-mockup .lock-icon { width: 0.75rem; height: 0.75rem; flex-shrink: 0; }
  .browser-url { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .browser-content { width: 100%; overflow: hidden; }
  .browser-content img { display: block; width: 100%; height: auto; margin: 0; border-radius: 0; }
  .browser-content p { margin: 0; }

  @media (max-width: 640px) {
    .browser-titlebar { padding: 0.375rem 0.5rem; }
    .browser-traffic-lights { gap: 0.375rem; }
    .browser-mockup .dot { width: 0.625rem; height: 0.625rem; }
    .browser-tab { font-size: 0.625rem; padding: 0.2rem 0.5rem; }
    .browser-toolbar { padding: 0.25rem 0.5rem; }
    .browser-address-bar { font-size: 0.625rem; padding: 0.2rem 0.5rem; }
    .browser-mockup .nav-icon { width: 0.875rem; height: 0.875rem; }
  }
}

/* Utilities */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Scrollbar that only shows on hover */
  .scrollbar-on-hover {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }

  .scrollbar-on-hover::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-on-hover::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-on-hover::-webkit-scrollbar-thumb {
    background-color: transparent;
    border-radius: 9999px;
    transition: background-color 0.2s ease;
  }

  .scrollbar-on-hover:hover {
    scrollbar-color: var(--color-border) transparent;
  }

  .scrollbar-on-hover:hover::-webkit-scrollbar-thumb {
    background-color: var(--color-border);
  }

  .scrollbar-on-hover:hover::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-text-muted);
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
